@import '~tabby-core/src/theme.scss';

.chat-container {
    display: flex;
    flex-direction: column;
    height: 100%;
    background: $background-color; // Using Tabby's theme variable
    color: $text-color; // Using Tabby's theme variable
}

.message-history {
    flex-grow: 1;
    overflow-y: auto;
    padding: 15px;
    border-bottom: 1px solid $border-color; // Using Tabby's theme variable

    .message-entry {
        margin-bottom: 10px;
        padding: 10px;
        border-radius: 5px;
        word-wrap: break-word;

        .role {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 0.9em;
            color: $text-muted-color; // Using Tabby's theme variable
        }

        .content {
            white-space: pre-wrap; // Preserve whitespace and newlines
        }

        &.message-user {
            background: darken($background-color, 5%); // Slightly darker for user messages
            margin-left: 20%;
            .role {
                text-align: right;
            }
        }

        &.message-assistant {
            background: lighten($background-color, 5%); // Slightly lighter for AI messages
            margin-right: 20%;
        }

        &.message-system {
            font-style: italic;
            text-align: center;
            color: $text-muted-color;
            background: transparent;
            font-size: 0.85em;
        }
    }
}

.input-area {
    display: flex;
    padding: 10px;
    border-top: 1px solid $border-color; // Using Tabby's theme variable

    textarea.form-control {
        flex-grow: 1;
        margin-right: 10px;
        resize: none;
        min-height: 40px; // Ensure it's not too small
        max-height: 150px; // Prevent excessive growth
        background-color: lighten($background-color, 2%);
        color: $text-color;
        border-color: $border-color;

        &:focus {
            background-color: lighten($background-color, 5%);
            border-color: $primary; // Use primary color for focus, assuming it's defined
        }
    }

    button.btn.btn-primary {
        min-height: 40px; // Match textarea height
        // Standard button styling will be inherited from Tabby's theme
    }
}

// Spinner for loading state
.fa-spinner {
    margin-right: 5px;
}

// This provides a basic structure. More refinement will be needed for a "high-end" feel.
// This might involve more subtle color variations, better spacing, custom scrollbars, etc.
// Also, the `keepHtml` pipe mentioned in the pug file needs to be implemented if the AI
// is expected to return HTML content. For now, this assumes plain text.
